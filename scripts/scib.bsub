#BSUB -G cellgeni
#BSUB -q "basement"
#BSUB -n 1
#BSUB -M 4GB
#BSUB -R "select[mem>4GB] rusage[mem=4GB]"
#BSUB -o "logs/sciboutput%J.log"
#BSUB -e "logs/sciberror%J.log"

nextflow run scvi_scib_pipeline/scib.nf \
    --representations "/lustre/scratch127/cellgen/cellgeni/tickets/tic-4101/logs/representations.csv" \
    --downsample_adata "/lustre/scratch124/cellgen/haniffa/projects/hdca/nobackup_data/to/for_batu_scib_downsampled.h5ad" \
    --downsample_cells "/lustre/scratch127/cellgen/cellgeni/tickets/tic-4101/results/downsample/downsample_cells.json" \
    --celltype_key "lvl3_freezev1" \
    --batch_key "concatenated_integration_covariates" \
    --output_dir "/lustre/scratch127/cellgen/cellgeni/tickets/tic-4101/results-scib" \
    -resume